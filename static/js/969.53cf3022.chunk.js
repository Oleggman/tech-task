"use strict";(self.webpackChunktech_task=self.webpackChunktech_task||[]).push([[969],{969:(n,r,e)=>{e.r(r),e.d(r,{default:()=>P});var a,t=e(791),d=e(689),o=e(401),i=e(168),s=e(978);const l=s.ZP.li(a||(a=(0,i.Z)(["\n  padding: 6px;\n  border-radius: 8px;\n  border: 1px solid navy;\n  background-color: antiquewhite;\n  font-weight: 500;\n  cursor: grab;\n"])));var c=e(868),u=e(184);const p=n=>{let{card:r,list:e,dragCard:a,setDragCard:t,dragList:d,setDragList:i}=n;const{board:s,changeBoard:p}=(0,c.$)();return(0,u.jsx)(l,{draggable:!0,onDragOver:n=>(n=>{n.preventDefault(),n.target.style.backgroundColor="lightgray"})(n),onDragLeave:n=>(n=>{n.target.style.backgroundColor="antiquewhite"})(n),onDragStart:n=>(i(e),void t(r)),onDragEnd:n=>(n=>{n.target.style.backgroundColor="antiquewhite"})(n),onDrop:n=>(async n=>{if(n.preventDefault(),n.target.style.backgroundColor="antiquewhite",a.id===r.id)return;const t=d.cards.indexOf(a),i=d.cards.toSpliced(t,1),l=e.cards.indexOf(r),c=e.cards.toSpliced(l,0,a),u=await o.wI(a.id,e.id);if(p&&s&&200===u.status){const n=s.map((n=>n.id===d.id&&n.id===e.id?{...n,cards:i.toSpliced(l,0,a)}:n.id===d.id&&d.id!==e.id?{...n,cards:i}:n.id===e.id&&d.id!==e.id?{...n,cards:c}:n));p(n)}})(n),children:r.name})};var g,x,f,b;const h=s.ZP.ul(g||(g=(0,i.Z)(["\n  display: flex;\n  gap: 40px;\n  flex-wrap: nowrap;\n"]))),v=s.ZP.li(x||(x=(0,i.Z)(["\n  flex-basis: 240px;\n  flex-shrink: 0;\n  padding: 8px;\n  border-radius: 16px;\n  border: 1px solid black;\n  background-color: lavender;\n  height: fit-content;\n"]))),m=s.ZP.h2(f||(f=(0,i.Z)(['\n  text-align: center;\n  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;\n  margin-bottom: 12px;\n  font-size: 20px;\n']))),w=s.ZP.ul(b||(b=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 12px;\n"])));var k,y;const D=s.ZP.textarea(k||(k=(0,i.Z)(["\n  resize: none;\n  width: 100%;\n  border-radius: 4px;\n  border: 2px solid;\n  border-color: transparent;\n  margin-bottom: 4px;\n\n  &:focus {\n    outline: none;\n    border-color: green;\n  }\n"]))),j=s.ZP.button(y||(y=(0,i.Z)(["\n  background-color: #e2e5e8;\n  border-radius: 4px;\n  color: inherit;\n  cursor: pointer;\n  padding: 6px 12px;\n  border: 1px solid;\n  border-color: black;\n  transition: border-color 300ms, background-color 300ms, color 300ms;\n\n  &:hover {\n    background-color: #1976d2;\n    color: #fff;\n    border-color: transparent;\n  }\n"]))),Z=n=>{let{listId:r}=n;const{board:e,changeBoard:a}=(0,c.$)();return(0,u.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const t=n.target.elements.text.value,d=await o.Z0(r,t);if(a&&e){const n=e.map((n=>{var e;return n.id===r?{...n,cards:[...n.cards,{id:null===(e=d.data)||void 0===e?void 0:e.id,name:t}]}:n}));a(n)}n.target.reset()},children:[(0,u.jsx)(D,{name:"text",placeholder:"Create new card"}),(0,u.jsx)(j,{type:"submit",children:"Create card"})]})},C=n=>{let{lists:r}=n;const[e,a]=(0,t.useState)(null),{board:d,changeBoard:i}=(0,c.$)(),s=(0,t.useRef)(!1),[l,g]=(0,t.useState)(),[x,f]=(0,t.useState)();(0,t.useEffect)((()=>((async()=>{if(r){const n=await Promise.all(null===r||void 0===r?void 0:r.map((async n=>await o.NS(n.id)))),e=r.map(((r,e)=>({...r,cards:n[e]})));a(e)}})(),()=>{a(null),s.current=!1})),[r]),i&&!s.current&&e&&(i(e),s.current=!0);return(0,u.jsxs)(u.Fragment,{children:[e&&(0,u.jsx)(h,{children:null===d||void 0===d?void 0:d.map((n=>(0,u.jsxs)(v,{onDragOver:n=>(n=>{n.preventDefault()})(n),onDrop:r=>(async(n,r)=>{if(n.preventDefault(),0!==r.cards.length||!l||!x)return;const e=l.cards.indexOf(x),a=l.cards.slice(e,e+1),t=[x],s=await o.wI(null===x||void 0===x?void 0:x.id,r.id);if(i&&d&&200===s.status){const n=d.map((n=>n.id===l.id?{...n,cards:a}:n.id===r.id?{...n,cards:t}:n));i(n)}})(r,n),children:[(0,u.jsx)(m,{children:n.name}),(0,u.jsx)(w,{children:n.cards.map((r=>(0,u.jsx)(p,{card:r,list:n,dragCard:x,setDragCard:f,dragList:l,setDragList:g},r.id)))}),(0,u.jsx)(Z,{listId:n.id})]},n.id)))}),!e&&(0,u.jsx)("h2",{children:"Loading..."})]})};var S=e(970);const P=()=>{const[n,r]=(0,t.useState)(null),{boardId:e}=(0,d.UO)();return(0,t.useEffect)((()=>{(async()=>{const n=await o.WU(e);r(n)})()}),[e]),(0,u.jsxs)("div",{children:[(0,u.jsx)(S.If,{children:null===n||void 0===n?void 0:n.name}),(0,u.jsx)(C,{lists:null===n||void 0===n?void 0:n.lists})]})}}}]);
//# sourceMappingURL=969.53cf3022.chunk.js.map